// পার্সার মডিউল - Pratt Parser (প্র্যাট পার্সার)
// অপারেটর অগ্রাধিকার সহ সম্পূর্ণ পার্সার বাস্তবায়ন

অন্তর্ভুক্ত "modules/টোকেন";
অন্তর্ভুক্ত "modules/লেক্সার";
অন্তর্ভুক্ত "modules/এএসটি";

// অপারেটর অগ্রাধিকার স্তর
ধরি সর্বনিম্ন_অগ্রাধিকার = ১;
ধরি যৌক্তিক_অথবা_অগ্রাধিকার = ২;  // ||
ধরি যৌক্তিক_এবং_অগ্রাধিকার = ৩;     // &&
ধরি বিট_অথবা_অগ্রাধিকার = ৪;        // |
ধরি বিট_এক্সঅর_অগ্রাধিকার = ৫;      // ^
ধরি বিট_এবং_অগ্রাধিকার = ৬;         // &
ধরি সমান_অগ্রাধিকার = ৭;            // == !=
ধরি তুলনা_অগ্রাধিকার = ৮;           // < > <= >=
ধরি সরান_অগ্রাধিকার = ৯;            // << >>
ধরি যোগ_অগ্রাধিকার = ১০;            // + -
ধরি গুণ_অগ্রাধিকার = ১১;            // * / %
ধরি উপসর্গ_অগ্রাধিকার = ১২;         // -x !x ~x
ধরি কল_অগ্রাধিকার = ১৩;             // func()
ধরি সূচক_অগ্রাধিকার = ১৪;           // array[i]

// অগ্রাধিকার ম্যাপ
ধরি অগ্রাধিকার_ম্যাপ = {
    "||": যৌক্তিক_অথবা_অগ্রাধিকার,
    "&&": যৌক্তিক_এবং_অগ্রাধিকার,
    "|": বিট_অথবা_অগ্রাধিকার,
    "^": বিট_এক্সঅর_অগ্রাধিকার,
    "&": বিট_এবং_অগ্রাধিকার,
    "==": সমান_অগ্রাধিকার,
    "!=": সমান_অগ্রাধিকার,
    "<": তুলনা_অগ্রাধিকার,
    ">": তুলনা_অগ্রাধিকার,
    "<=": তুলনা_অগ্রাধিকার,
    ">=": তুলনা_অগ্রাধিকার,
    "<<": সরান_অগ্রাধিকার,
    ">>": সরান_অগ্রাধিকার,
    "+": যোগ_অগ্রাধিকার,
    "-": যোগ_অগ্রাধিকার,
    "*": গুণ_অগ্রাধিকার,
    "/": গুণ_অগ্রাধিকার,
    "%": গুণ_অগ্রাধিকার,
    "(": কল_অগ্রাধিকার,
    "[": সূচক_অগ্রাধিকার
};

// নতুন_পার্সার - নতুন পার্সার তৈরি করো
ধরি নতুন_পার্সার = ফাংশন(লেক্সার) {
    ধরি পার্সার = {
        "লেক্সার": লেক্সার,
        "বর্তমান_টোকেন": নাল,
        "পরবর্তী_টোকেন": নাল,
        "ত্রুটি": []
    };
    
    // প্রথম দুটি টোকেন পড়ো
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ফেরত পার্সার;
};

// টোকেন_এগিয়ে_নাও - পরবর্তী টোকেনে যাও
ধরি টোকেন_এগিয়ে_নাও = ফাংশন(পার্সার) {
    পার্সার["বর্তমান_টোকেন"] = পার্সার["পরবর্তী_টোকেন"];
    
    ধরি ফলাফল = পরবর্তী_টোকেন(পার্সার["লেক্সার"]);
    পার্সার["লেক্সার"] = ফলাফল["লেক্সার"];
    পার্সার["পরবর্তী_টোকেন"] = ফলাফল["টোকেন"];
    
    ফেরত পার্সার;
};

// বর্তমান_টোকেন_কি - বর্তমান টোকেন টাইপ পরীক্ষা করো
ধরি বর্তমান_টোকেন_কি = ফাংশন(পার্সার, টাইপ) {
    ফেরত পার্সার["বর্তমান_টোকেন"]["টাইপ"] == টাইপ;
};

// পরবর্তী_টোকেন_কি - পরবর্তী টোকেন টাইপ পরীক্ষা করো
ধরি পরবর্তী_টোকেন_কি = ফাংশন(পার্সার, টাইপ) {
    ফেরত পার্সার["পরবর্তী_টোকেন"]["টাইপ"] == টাইপ;
};

// প্রত্যাশিত_পরবর্তী - প্রত্যাশিত টোকেন পরীক্ষা করো এবং এগিয়ে যাও
ধরি প্রত্যাশিত_পরবর্তী = ফাংশন(পার্সার, টাইপ) {
    যদি (পরবর্তী_টোকেন_কি(পার্সার, টাইপ)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        ফেরত {"সফল": সত্য, "পার্সার": পার্সার};
    } নাহলে {
        ধরি ত্রুটি = "প্রত্যাশিত " + টাইপ + ", পাওয়া গেছে " + পার্সার["পরবর্তী_টোকেন"]["টাইপ"];
        পার্সার["ত্রুটি"] = যোগ(পার্সার["ত্রুটি"], ত্রুটি);
        ফেরত {"সফল": মিথ্যা, "পার্সার": পার্সার};
    }
};

// বর্তমান_অগ্রাধিকার - বর্তমান টোকেনের অগ্রাধিকার পাও
ধরি বর্তমান_অগ্রাধিকার = ফাংশন(পার্সার) {
    ধরি টাইপ = পার্সার["বর্তমান_টোকেন"]["টাইপ"];
    যদি (চাবি_আছে(অগ্রাধিকার_ম্যাপ, টাইপ)) {
        ফেরত অগ্রাধিকার_ম্যাপ[টাইপ];
    }
    ফেরত সর্বনিম্ন_অগ্রাধিকার;
};

// পরবর্তী_অগ্রাধিকার - পরবর্তী টোকেনের অগ্রাধিকার পাও
ধরি পরবর্তী_অগ্রাধিকার = ফাংশন(পার্সার) {
    ধরি টাইপ = পার্সার["পরবর্তী_টোকেন"]["টাইপ"];
    যদি (চাবি_আছে(অগ্রাধিকার_ম্যাপ, টাইপ)) {
        ফেরত অগ্রাধিকার_ম্যাপ[টাইপ];
    }
    ফেরত সর্বনিম্ন_অগ্রাধিকার;
};

// =============== প্রোগ্রাম পার্স করো ===============

// পার্স_প্রোগ্রাম - সম্পূর্ণ প্রোগ্রাম পার্স করো
ধরি পার্স_প্রোগ্রাম = ফাংশন(পার্সার) {
    ধরি প্রোগ্রাম = নতুন_প্রোগ্রাম();
    
    যতক্ষণ (!বর্তমান_টোকেন_কি(পার্সার, শেষ)) {
        ধরি ফলাফল = পার্স_বিবৃতি(পার্সার);
        পার্সার = ফলাফল["পার্সার"];
        
        যদি (ফলাফল["বিবৃতি"] != নাল) {
            প্রোগ্রাম["বিবৃতি"] = যোগ(প্রোগ্রাম["বিবৃতি"], ফলাফল["বিবৃতি"]);
        }
        
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ফেরত {"প্রোগ্রাম": প্রোগ্রাম, "পার্সার": পার্সার};
};

// =============== বিবৃতি পার্স করো ===============

// পার্স_বিবৃতি - বিবৃতি পার্স করো
ধরি পার্স_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টাইপ = পার্সার["বর্তমান_টোকেন"]["টাইপ"];
    
    যদি (টাইপ == ধরি_শব্দ) {
        ফেরত পার্স_ধরি_বিবৃতি(পার্সার);
    } নাহলে যদি (টাইপ == ফেরত_শব্দ) {
        ফেরত পার্স_ফেরত_বিবৃতি(পার্সার);
    } নাহলে যদি (টাইপ == যতক্ষণ_শব্দ) {
        ফেরত পার্স_যতক্ষণ_বিবৃতি(পার্সার);
    } নাহলে যদি (টাইপ == পর্যন্ত_শব্দ) {
        ফেরত পার্স_পর্যন্ত_বিবৃতি(পার্সার);
    } নাহলে যদি (টাইপ == বিরতি_শব্দ) {
        ফেরত পার্স_বিরতি_বিবৃতি(পার্সার);
    } নাহলে যদি (টাইপ == চালিয়ে_যাও_শব্দ) {
        ফেরত পার্স_চালিয়ে_যাও_বিবৃতি(পার্সার);
    } নাহলে যদি (টাইপ == অন্তর্ভুক্ত_শব্দ) {
        ফেরত পার্স_আমদানি_বিবৃতি(পার্সার);
    } নাহলে যদি (টাইপ == পরিচয় && পরবর্তী_টোকেন_কি(পার্সার, সমান)) {
        ফেরত পার্স_নির্ধারণ_বিবৃতি(পার্সার);
    } নাহলে {
        ফেরত পার্স_অভিব্যক্তি_বিবৃতি(পার্সার);
    }
};

// পার্স_ধরি_বিবৃতি - ধরি বিবৃতি পার্স করো
ধরি পার্স_ধরি_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, পরিচয়);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ধরি নাম = নতুন_শনাক্তকারী(পার্সার["বর্তমান_টোকেন"], পার্সার["বর্তমান_টোকেন"]["লিটারেল"]);
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, সমান);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি মান_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = মান_ফলাফল["পার্সার"];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ধরি বিবৃতি = নতুন_ধরি_বিবৃতি(টোকেন, নাম, মান_ফলাফল["অভিব্যক্তি"]);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_ফেরত_বিবৃতি - ফেরত বিবৃতি পার্স করো
ধরি পার্স_ফেরত_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি মান_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = মান_ফলাফল["পার্সার"];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ধরি বিবৃতি = নতুন_ফেরত_বিবৃতি(টোকেন, মান_ফলাফল["অভিব্যক্তি"]);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_অভিব্যক্তি_বিবৃতি - অভিব্যক্তি বিবৃতি পার্স করো
ধরি পার্স_অভিব্যক্তি_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = ফলাফল["পার্সার"];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ধরি বিবৃতি = নতুন_অভিব্যক্তি_বিবৃতি(টোকেন, ফলাফল["অভিব্যক্তি"]);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_ব্লক_বিবৃতি - ব্লক বিবৃতি পার্স করো
ধরি পার্স_ব্লক_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    ধরি ব্লক = নতুন_ব্লক_বিবৃতি(টোকেন);
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    যতক্ষণ (!বর্তমান_টোকেন_কি(পার্সার, দ্বিতীয়_বন্ধনী_শেষ) && !বর্তমান_টোকেন_কি(পার্সার, শেষ)) {
        ধরি ফলাফল = পার্স_বিবৃতি(পার্সার);
        পার্সার = ফলাফল["পার্সার"];
        
        যদি (ফলাফল["বিবৃতি"] != নাল) {
            ব্লক["বিবৃতি"] = যোগ(ব্লক["বিবৃতি"], ফলাফল["বিবৃতি"]);
        }
        
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ফেরত {"বিবৃতি": ব্লক, "পার্সার": পার্সার};
};

// পার্স_যতক্ষণ_বিবৃতি - যতক্ষণ লুপ পার্স করো
ধরি পার্স_যতক্ষণ_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি শর্ত_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = শর্ত_ফলাফল["পার্সার"];
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শেষ);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, দ্বিতীয়_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ধরি দেহ_ফলাফল = পার্স_ব্লক_বিবৃতি(পার্সার);
    পার্সার = দেহ_ফলাফল["পার্সার"];
    
    ধরি বিবৃতি = নতুন_যতক্ষণ_বিবৃতি(টোকেন, শর্ত_ফলাফল["অভিব্যক্তি"], দেহ_ফলাফল["বিবৃতি"]);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_পর্যন্ত_বিবৃতি - পর্যন্ত (for) লুপ পার্স করো
ধরি পার্স_পর্যন্ত_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    // প্রাথমিক
    ধরি প্রাথমিক = নাল;
    যদি (বর্তমান_টোকেন_কি(পার্সার, ধরি_শব্দ)) {
        ধরি প্রাথমিক_ফলাফল = পার্স_ধরি_বিবৃতি(পার্সার);
        পার্সার = প্রাথমিক_ফলাফল["পার্সার"];
        প্রাথমিক = প্রাথমিক_ফলাফল["বিবৃতি"];
    } নাহলে যদি (বর্তমান_টোকেন_কি(পার্সার, পরিচয়) && পরবর্তী_টোকেন_কি(পার্সার, সমান)) {
        ধরি নির্ধারণ_ফলাফল = পার্স_নির্ধারণ_বিবৃতি(পার্সার);
        পার্সার = নির্ধারণ_ফলাফল["পার্সার"];
        প্রাথমিক = নির্ধারণ_ফলাফল["বিবৃতি"];
    }
    
    যদি (বর্তমান_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    // শর্ত
    ধরি শর্ত = নাল;
    যদি (!বর্তমান_টোকেন_কি(পার্সার, সেমিকোলন)) {
        ধরি শর্ত_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
        পার্সার = শর্ত_ফলাফল["পার্সার"];
        শর্ত = শর্ত_ফলাফল["অভিব্যক্তি"];
    }
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, সেমিকোলন);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    // বৃদ্ধি
    ধরি বৃদ্ধি = নাল;
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    যদি (!বর্তমান_টোকেন_কি(পার্সার, প্রথম_বন্ধনী_শেষ)) {
        যদি (বর্তমান_টোকেন_কি(পার্সার, পরিচয়) && পরবর্তী_টোকেন_কি(পার্সার, সমান)) {
            ধরি বৃদ্ধি_ফলাফল = পার্স_নির্ধারণ_বিবৃতি(পার্সার);
            পার্সার = বৃদ্ধি_ফলাফল["পার্সার"];
            বৃদ্ধি = বৃদ্ধি_ফলাফল["বিবৃতি"];
        } নাহলে {
            ধরি বৃদ্ধি_অভিব্যক্তি_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
            পার্সার = বৃদ্ধি_অভিব্যক্তি_ফলাফল["পার্সার"];
            বৃদ্ধি = নতুন_অভিব্যক্তি_বিবৃতি(পার্সার["বর্তমান_টোকেন"], বৃদ্ধি_অভিব্যক্তি_ফলাফল["অভিব্যক্তি"]);
        }
    }
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শেষ);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, দ্বিতীয়_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ধরি দেহ_ফলাফল = পার্স_ব্লক_বিবৃতি(পার্সার);
    পার্সার = দেহ_ফলাফল["পার্সার"];
    
    ধরি বিবৃতি = নতুন_পর্যন্ত_বিবৃতি(টোকেন, প্রাথমিক, শর্ত, বৃদ্ধি, দেহ_ফলাফল["বিবৃতি"]);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_বিরতি_বিবৃতি - বিরতি (break) পার্স করো
ধরি পার্স_বিরতি_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ধরি বিবৃতি = নতুন_বিরতি_বিবৃতি(টোকেন);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_চালিয়ে_যাও_বিবৃতি - চালিয়ে_যাও (continue) পার্স করো
ধরি পার্স_চালিয়ে_যাও_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ধরি বিবৃতি = নতুন_চালিয়ে_যাও_বিবৃতি(টোকেন);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_আমদানি_বিবৃতি - আমদানি (import) বিবৃতি পার্স করো
ধরি পার্স_আমদানি_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি পথ_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = পথ_ফলাফল["পার্সার"];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ধরি বিবৃতি = নতুন_আমদানি_বিবৃতি(টোকেন, পথ_ফলাফল["অভিব্যক্তি"]);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// পার্স_নির্ধারণ_বিবৃতি - নির্ধারণ (x = ৫) পার্স করো
ধরি পার্স_নির্ধারণ_বিবৃতি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    ধরি নাম = নতুন_শনাক্তকারী(টোকেন, টোকেন["লিটারেল"]);
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, সমান);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"বিবৃতি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি মান_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = মান_ফলাফল["পার্সার"];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    }
    
    ধরি বিবৃতি = নতুন_নির্ধারণ_বিবৃতি(টোকেন, নাম, মান_ফলাফল["অভিব্যক্তি"]);
    ফেরত {"বিবৃতি": বিবৃতি, "পার্সার": পার্সার};
};

// =============== অভিব্যক্তি পার্স করো ===============

// পার্স_অভিব্যক্তি - অভিব্যক্তি পার্স করো (Pratt parsing)
ধরি পার্স_অভিব্যক্তি = ফাংশন(পার্সার, অগ্রাধিকার) {
    // উপসর্গ পার্স করো
    ধরি বাম_ফলাফল = পার্স_উপসর্গ_অভিব্যক্তি(পার্সার);
    পার্সার = বাম_ফলাফল["পার্সার"];
    ধরি বাম = বাম_ফলাফল["অভিব্যক্তি"];
    
    // মধ্যবর্তী অপারেটর পার্স করো
    যতক্ষণ (!পরবর্তী_টোকেন_কি(পার্সার, সেমিকোলন) && অগ্রাধিকার < পরবর্তী_অগ্রাধিকার(পার্সার)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        
        ধরি মধ্যবর্তী_ফলাফল = পার্স_মধ্যবর্তী_অভিব্যক্তি(পার্সার, বাম);
        পার্সার = মধ্যবর্তী_ফলাফল["পার্সার"];
        বাম = মধ্যবর্তী_ফলাফল["অভিব্যক্তি"];
    }
    
    ফেরত {"অভিব্যক্তি": বাম, "পার্সার": পার্সার};
};

// পার্স_উপসর্গ_অভিব্যক্তি - উপসর্গ অভিব্যক্তি পার্স করো
ধরি পার্স_উপসর্গ_অভিব্যক্তি = ফাংশন(পার্সার) {
    ধরি টাইপ = পার্সার["বর্তমান_টোকেন"]["টাইপ"];
    
    যদি (টাইপ == পরিচয়) {
        ফেরত পার্স_শনাক্তকারী(পার্সার);
    } নাহলে যদি (টাইপ == পূর্ণসংখ্যা_টোকেন) {
        ফেরত পার্স_পূর্ণসংখ্যা_লিটারেল(পার্সার);
    } নাহলে যদি (টাইপ == দশমিক_টোকেন) {
        ফেরত পার্স_দশমিক_লিটারেল(পার্সার);
    } নাহলে যদি (টাইপ == স্ট্রিং_টোকেন) {
        ফেরত পার্স_স্ট্রিং_লিটারেল(পার্সার);
    } নাহলে যদি (টাইপ == সত্য_শব্দ || টাইপ == মিথ্যা_শব্দ) {
        ফেরত পার্স_বুলিয়ান(পার্সার);
    } নাহলে যদি (টাইপ == না || টাইপ == বিয়োগ || টাইপ == বিট_না) {
        ফেরত পার্স_উপসর্গ_অপারেটর(পার্সার);
    } নাহলে যদি (টাইপ == প্রথম_বন্ধনী_শুরু) {
        ফেরত পার্স_গ্রুপ_অভিব্যক্তি(পার্সার);
    } নাহলে যদি (টাইপ == যদি_শব্দ) {
        ফেরত পার্স_যদি_অভিব্যক্তি(পার্সার);
    } নাহলে যদি (টাইপ == ফাংশন_শব্দ) {
        ফেরত পার্স_ফাংশন_লিটারেল(পার্সার);
    } নাহলে যদি (টাইপ == তৃতীয়_বন্ধনী_শুরু) {
        ফেরত পার্স_অ্যারে_লিটারেল(পার্সার);
    } নাহলে যদি (টাইপ == দ্বিতীয়_বন্ধনী_শুরু) {
        ফেরত পার্স_হ্যাশ_লিটারেল(পার্সার);
    } নাহলে {
        ধরি ত্রুটি = "উপসর্গ পার্স ফাংশন পাওয়া যায়নি: " + টাইপ;
        পার্সার["ত্রুটি"] = যোগ(পার্সার["ত্রুটি"], ত্রুটি);
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": পার্সার};
    }
};

// পার্স_মধ্যবর্তী_অভিব্যক্তি - মধ্যবর্তী অভিব্যক্তি পার্স করো
ধরি পার্স_মধ্যবর্তী_অভিব্যক্তি = ফাংশন(পার্সার, বাম) {
    ধরি টাইপ = পার্সার["বর্তমান_টোকেন"]["টাইপ"];
    
    যদি (টাইপ == প্রথম_বন্ধনী_শুরু) {
        ফেরত পার্স_কল_অভিব্যক্তি(পার্সার, বাম);
    } নাহলে যদি (টাইপ == তৃতীয়_বন্ধনী_শুরু) {
        ফেরত পার্স_সূচক_অভিব্যক্তি(পার্সার, বাম);
    } নাহলে {
        ফেরত পার্স_বাইনারি_অপারেটর(পার্সার, বাম);
    }
};

// পার্স_শনাক্তকারী - শনাক্তকারী পার্স করো
ধরি পার্স_শনাক্তকারী = ফাংশন(পার্সার) {
    ধরি অভিব্যক্তি = নতুন_শনাক্তকারী(পার্সার["বর্তমান_টোকেন"], পার্সার["বর্তমান_টোকেন"]["লিটারেল"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_পূর্ণসংখ্যা_লিটারেল - পূর্ণসংখ্যা লিটারেল পার্স করো
ধরি পার্স_পূর্ণসংখ্যা_লিটারেল = ফাংশন(পার্সার) {
    ধরি মান = সংখ্যা(পার্সার["বর্তমান_টোকেন"]["লিটারেল"]);
    ধরি অভিব্যক্তি = নতুন_পূর্ণসংখ্যা_লিটারেল(পার্সার["বর্তমান_টোকেন"], মান);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_দশমিক_লিটারেল - দশমিক লিটারেল পার্স করো
ধরি পার্স_দশমিক_লিটারেল = ফাংশন(পার্সার) {
    ধরি মান = দশমিক_দ্বিগুণ(পার্সার["বর্তমান_টোকেন"]["লিটারেল"]);
    ধরি অভিব্যক্তি = নতুন_দশমিক_লিটারেল(পার্সার["বর্তমান_টোকেন"], মান);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_স্ট্রিং_লিটারেল - স্ট্রিং লিটারেল পার্স করো
ধরি পার্স_স্ট্রিং_লিটারেল = ফাংশন(পার্সার) {
    ধরি অভিব্যক্তি = নতুন_স্ট্রিং_লিটারেল(পার্সার["বর্তমান_টোকেন"], পার্সার["বর্তমান_টোকেন"]["লিটারেল"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_বুলিয়ান - বুলিয়ান পার্স করো
ধরি পার্স_বুলিয়ান = ফাংশন(পার্সার) {
    ধরি মান = বর্তমান_টোকেন_কি(পার্সার, সত্য_শব্দ);
    ধরি অভিব্যক্তি = নতুন_বুলিয়ান(পার্সার["বর্তমান_টোকেন"], মান);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_উপসর্গ_অপারেটর - উপসর্গ অপারেটর পার্স করো (!x, -৫)
ধরি পার্স_উপসর্গ_অপারেটর = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    ধরি অপারেটর = টোকেন["লিটারেল"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি ডান_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, উপসর্গ_অগ্রাধিকার);
    পার্সার = ডান_ফলাফল["পার্সার"];
    
    ধরি অভিব্যক্তি = নতুন_উপসর্গ_অভিব্যক্তি(টোকেন, অপারেটর, ডান_ফলাফল["অভিব্যক্তি"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_বাইনারি_অপারেটর - বাইনারি অপারেটর পার্স করো
ধরি পার্স_বাইনারি_অপারেটর = ফাংশন(পার্সার, বাম) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    ধরি অপারেটর = টোকেন["লিটারেল"];
    ধরি অগ্রাধিকার = বর্তমান_অগ্রাধিকার(পার্সার);
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি ডান_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, অগ্রাধিকার);
    পার্সার = ডান_ফলাফল["পার্সার"];
    
    ধরি অভিব্যক্তি = নতুন_মধ্যবর্তী_অভিব্যক্তি(টোকেন, বাম, অপারেটর, ডান_ফলাফল["অভিব্যক্তি"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_গ্রুপ_অভিব্যক্তি - গ্রুপ অভিব্যক্তি পার্স করো (expr)
ধরি পার্স_গ্রুপ_অভিব্যক্তি = ফাংশন(পার্সার) {
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = ফলাফল["পার্সার"];
    
    ধরি প্রত্যাশা = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শেষ);
    যদি (!প্রত্যাশা["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": প্রত্যাশা["পার্সার"]};
    }
    
    ফেরত {"অভিব্যক্তি": ফলাফল["অভিব্যক্তি"], "পার্সার": প্রত্যাশা["পার্সার"]};
};

// পার্স_যদি_অভিব্যক্তি - যদি অভিব্যক্তি পার্স করো
ধরি পার্স_যদি_অভিব্যক্তি = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি শর্ত_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = শর্ত_ফলাফল["পার্সার"];
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শেষ);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, দ্বিতীয়_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ধরি পরিণাম_ফলাফল = পার্স_ব্লক_বিবৃতি(পার্সার);
    পার্সার = পরিণাম_ফলাফল["পার্সার"];
    
    ধরি বিকল্প = নাল;
    যদি (পরবর্তী_টোকেন_কি(পার্সার, নাহলে_শব্দ)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        
        ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, দ্বিতীয়_বন্ধনী_শুরু);
        যদি (!ফলাফল["সফল"]) {
            ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
        }
        পার্সার = ফলাফল["পার্সার"];
        
        ধরি বিকল্প_ফলাফল = পার্স_ব্লক_বিবৃতি(পার্সার);
        পার্সার = বিকল্প_ফলাফল["পার্সার"];
        বিকল্প = বিকল্প_ফলাফল["বিবৃতি"];
    }
    
    ধরি অভিব্যক্তি = নতুন_যদি_অভিব্যক্তি(টোকেন, শর্ত_ফলাফল["অভিব্যক্তি"], পরিণাম_ফলাফল["বিবৃতি"], বিকল্প);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_ফাংশন_লিটারেল - ফাংশন লিটারেল পার্স করো
ধরি পার্স_ফাংশন_লিটারেল = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ধরি প্যারামিটার_ফলাফল = পার্স_ফাংশন_প্যারামিটার(পার্সার);
    পার্সার = প্যারামিটার_ফলাফল["পার্সার"];
    
    ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, দ্বিতীয়_বন্ধনী_শুরু);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    পার্সার = ফলাফল["পার্সার"];
    
    ধরি দেহ_ফলাফল = পার্স_ব্লক_বিবৃতি(পার্সার);
    পার্সার = দেহ_ফলাফল["পার্সার"];
    
    ধরি অভিব্যক্তি = নতুন_ফাংশন_লিটারেল(টোকেন, প্যারামিটার_ফলাফল["প্যারামিটার"], দেহ_ফলাফল["বিবৃতি"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_ফাংশন_প্যারামিটার - ফাংশন প্যারামিটার পার্স করো
ধরি পার্স_ফাংশন_প্যারামিটার = ফাংশন(পার্সার) {
    ধরি প্যারামিটার = [];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, প্রথম_বন্ধনী_শেষ)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        ফেরত {"প্যারামিটার": প্যারামিটার, "পার্সার": পার্সার};
    }
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি শনাক্তকারী = নতুন_শনাক্তকারী(পার্সার["বর্তমান_টোকেন"], পার্সার["বর্তমান_টোকেন"]["লিটারেল"]);
    প্যারামিটার = যোগ(প্যারামিটার, শনাক্তকারী);
    
    যতক্ষণ (পরবর্তী_টোকেন_কি(পার্সার, কমা)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        
        শনাক্তকারী = নতুন_শনাক্তকারী(পার্সার["বর্তমান_টোকেন"], পার্সার["বর্তমান_টোকেন"]["লিটারেল"]);
        প্যারামিটার = যোগ(প্যারামিটার, শনাক্তকারী);
    }
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শেষ);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"প্যারামিটার": [], "পার্সার": ফলাফল["পার্সার"]};
    }
    
    ফেরত {"প্যারামিটার": প্যারামিটার, "পার্সার": ফলাফল["পার্সার"]};
};

// পার্স_কল_অভিব্যক্তি - কল অভিব্যক্তি পার্স করো
ধরি পার্স_কল_অভিব্যক্তি = ফাংশন(পার্সার, ফাংশন) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি আর্গুমেন্ট_ফলাফল = পার্স_কল_আর্গুমেন্ট(পার্সার);
    পার্সার = আর্গুমেন্ট_ফলাফল["পার্সার"];
    
    ধরি অভিব্যক্তি = নতুন_কল_অভিব্যক্তি(টোকেন, ফাংশন, আর্গুমেন্ট_ফলাফল["আর্গুমেন্ট"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_কল_আর্গুমেন্ট - কল আর্গুমেন্ট পার্স করো
ধরি পার্স_কল_আর্গুমেন্ট = ফাংশন(পার্সার) {
    ধরি আর্গুমেন্ট = [];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, প্রথম_বন্ধনী_শেষ)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        ফেরত {"আর্গুমেন্ট": আর্গুমেন্ট, "পার্সার": পার্সার};
    }
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = ফলাফল["পার্সার"];
    আর্গুমেন্ট = যোগ(আর্গুমেন্ট, ফলাফল["অভিব্যক্তি"]);
    
    যতক্ষণ (পরবর্তী_টোকেন_কি(পার্সার, কমা)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        
        ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
        পার্সার = ফলাফল["পার্সার"];
        আর্গুমেন্ট = যোগ(আর্গুমেন্ট, ফলাফল["অভিব্যক্তি"]);
    }
    
    ধরি প্রত্যাশা = প্রত্যাশিত_পরবর্তী(পার্সার, প্রথম_বন্ধনী_শেষ);
    যদি (!প্রত্যাশা["সফল"]) {
        ফেরত {"আর্গুমেন্ট": [], "পার্সার": প্রত্যাশা["পার্সার"]};
    }
    
    ফেরত {"আর্গুমেন্ট": আর্গুমেন্ট, "পার্সার": প্রত্যাশা["পার্সার"]};
};

// পার্স_অ্যারে_লিটারেল - অ্যারে লিটারেল পার্স করো
ধরি পার্স_অ্যারে_লিটারেল = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    ধরি উপাদান_ফলাফল = পার্স_অভিব্যক্তি_তালিকা(পার্সার, তৃতীয়_বন্ধনী_শেষ);
    পার্সার = উপাদান_ফলাফল["পার্সার"];
    
    ধরি অভিব্যক্তি = নতুন_অ্যারে_লিটারেল(টোকেন, উপাদান_ফলাফল["তালিকা"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": পার্সার};
};

// পার্স_সূচক_অভিব্যক্তি - সূচক অভিব্যক্তি পার্স করো
ধরি পার্স_সূচক_অভিব্যক্তি = ফাংশন(পার্সার, বাম) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি সূচক_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = সূচক_ফলাফল["পার্সার"];
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, তৃতীয়_বন্ধনী_শেষ);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    
    ধরি অভিব্যক্তি = নতুন_সূচক_অভিব্যক্তি(টোকেন, বাম, সূচক_ফলাফল["অভিব্যক্তি"]);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": ফলাফল["পার্সার"]};
};

// পার্স_হ্যাশ_লিটারেল - হ্যাশ লিটারেল পার্স করো
ধরি পার্স_হ্যাশ_লিটারেল = ফাংশন(পার্সার) {
    ধরি টোকেন = পার্সার["বর্তমান_টোকেন"];
    ধরি জোড়া = {};
    
    যতক্ষণ (!পরবর্তী_টোকেন_কি(পার্সার, দ্বিতীয়_বন্ধনী_শেষ)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        
        ধরি কী_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
        পার্সার = কী_ফলাফল["পার্সার"];
        
        ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, কোলন);
        যদি (!ফলাফল["সফল"]) {
            ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
        }
        পার্সার = ফলাফল["পার্সার"];
        
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        
        ধরি মান_ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
        পার্সার = মান_ফলাফল["পার্সার"];
        
        // কী হিসাবে স্ট্রিং ব্যবহার করো
        ধরি কী_স্ট্রিং = নোড_থেকে_স্ট্রিং(কী_ফলাফল["অভিব্যক্তি"]);
        জোড়া[কী_স্ট্রিং] = {"কী": কী_ফলাফল["অভিব্যক্তি"], "মান": মান_ফলাফল["অভিব্যক্তি"]};
        
        যদি (!পরবর্তী_টোকেন_কি(পার্সার, দ্বিতীয়_বন্ধনী_শেষ)) {
            ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, কমা);
            যদি (!ফলাফল["সফল"]) {
                ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
            }
            পার্সার = ফলাফল["পার্সার"];
        }
    }
    
    ধরি ফলাফল = প্রত্যাশিত_পরবর্তী(পার্সার, দ্বিতীয়_বন্ধনী_শেষ);
    যদি (!ফলাফল["সফল"]) {
        ফেরত {"অভিব্যক্তি": নাল, "পার্সার": ফলাফল["পার্সার"]};
    }
    
    ধরি অভিব্যক্তি = নতুন_হ্যাশ_লিটারেল(টোকেন, জোড়া);
    ফেরত {"অভিব্যক্তি": অভিব্যক্তি, "পার্সার": ফলাফল["পার্সার"]};
};

// পার্স_অভিব্যক্তি_তালিকা - অভিব্যক্তি তালিকা পার্স করো
ধরি পার্স_অভিব্যক্তি_তালিকা = ফাংশন(পার্সার, শেষ_টোকেন) {
    ধরি তালিকা = [];
    
    যদি (পরবর্তী_টোকেন_কি(পার্সার, শেষ_টোকেন)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        ফেরত {"তালিকা": তালিকা, "পার্সার": পার্সার};
    }
    
    পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
    
    ধরি ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
    পার্সার = ফলাফল["পার্সার"];
    তালিকা = যোগ(তালিকা, ফলাফল["অভিব্যক্তি"]);
    
    যতক্ষণ (পরবর্তী_টোকেন_কি(পার্সার, কমা)) {
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        পার্সার = টোকেন_এগিয়ে_নাও(পার্সার);
        
        ফলাফল = পার্স_অভিব্যক্তি(পার্সার, সর্বনিম্ন_অগ্রাধিকার);
        পার্সার = ফলাফল["পার্সার"];
        তালিকা = যোগ(তালিকা, ফলাফল["অভিব্যক্তি"]);
    }
    
    ধরি প্রত্যাশা = প্রত্যাশিত_পরবর্তী(পার্সার, শেষ_টোকেন);
    যদি (!প্রত্যাশা["সফল"]) {
        ফেরত {"তালিকা": [], "পার্সার": প্রত্যাশা["পার্সার"]};
    }
    
    ফেরত {"তালিকা": তালিকা, "পার্সার": প্রত্যাশা["পার্সার"]};
};

লেখ("পার্সার মডিউল লোড হয়েছে");

