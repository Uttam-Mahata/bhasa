// এএসটি মডিউল - Abstract Syntax Tree (বিমূর্ত বাক্য গঠন বৃক্ষ)
// সকল বিবৃতি এবং অভিব্যক্তির নোড গঠন

অন্তর্ভুক্ত "modules/টোকেন";

// নোড টাইপ
ধরি বিবৃতি_নোড = "বিবৃতি";
ধরি অভিব্যক্তি_নোড = "অভিব্যক্তি";

// বিবৃতি টাইপ
ধরি ধরি_বিবৃতি_টাইপ = "ধরি_বিবৃতি";
ধরি ফেরত_বিবৃতি_টাইপ = "ফেরত_বিবৃতি";
ধরি অভিব্যক্তি_বিবৃতি_টাইপ = "অভিব্যক্তি_বিবৃতি";
ধরি ব্লক_বিবৃতি_টাইপ = "ব্লক_বিবৃতি";
ধরি যতক্ষণ_বিবৃতি_টাইপ = "যতক্ষণ_বিবৃতি";
ধরি পর্যন্ত_বিবৃতি_টাইপ = "পর্যন্ত_বিবৃতি";
ধরি বিরতি_বিবৃতি_টাইপ = "বিরতি_বিবৃতি";
ধরি চালিয়ে_যাও_বিবৃতি_টাইপ = "চালিয়ে_যাও_বিবৃতি";
ধরি আমদানি_বিবৃতি_টাইপ = "আমদানি_বিবৃতি";
ধরি নির্ধারণ_বিবৃতি_টাইপ = "নির্ধারণ_বিবৃতি";

// অভিব্যক্তি টাইপ
ধরি শনাক্তকারী_টাইপ = "শনাক্তকারী";
ধরি পূর্ণসংখ্যা_লিটারেল_টাইপ = "পূর্ণসংখ্যা_লিটারেল";
ধরি দশমিক_লিটারেল_টাইপ = "দশমিক_লিটারেল";
ধরি স্ট্রিং_লিটারেল_টাইপ = "স্ট্রিং_লিটারেল";
ধরি বুলিয়ান_টাইপ = "বুলিয়ান";
ধরি উপসর্গ_অভিব্যক্তি_টাইপ = "উপসর্গ_অভিব্যক্তি";
ধরি মধ্যবর্তী_অভিব্যক্তি_টাইপ = "মধ্যবর্তী_অভিব্যক্তি";
ধরি যদি_অভিব্যক্তি_টাইপ = "যদি_অভিব্যক্তি";
ধরি ফাংশন_লিটারেল_টাইপ = "ফাংশন_লিটারেল";
ধরি কল_অভিব্যক্তি_টাইপ = "কল_অভিব্যক্তি";
ধরি অ্যারে_লিটারেল_টাইপ = "অ্যারে_লিটারেল";
ধরি সূচক_অভিব্যক্তি_টাইপ = "সূচক_অভিব্যক্তি";
ধরি হ্যাশ_লিটারেল_টাইপ = "হ্যাশ_লিটারেল";

// =============== প্রোগ্রাম (মূল নোড) ===============

// নতুন_প্রোগ্রাম - নতুন প্রোগ্রাম তৈরি করো
ধরি নতুন_প্রোগ্রাম = ফাংশন() {
    ফেরত {
        "টাইপ": "প্রোগ্রাম",
        "বিবৃতি": []
    };
};

// =============== বিবৃতি নোড ===============

// নতুন_ধরি_বিবৃতি - ধরি বিবৃতি তৈরি করো (ধরি x = ৫)
ধরি নতুন_ধরি_বিবৃতি = ফাংশন(টোকেন, নাম, মান) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": ধরি_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "নাম": নাম,
        "মান": মান
    };
};

// নতুন_ফেরত_বিবৃতি - ফেরত বিবৃতি তৈরি করো (ফেরত x)
ধরি নতুন_ফেরত_বিবৃতি = ফাংশন(টোকেন, মান) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": ফেরত_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "ফেরত_মান": মান
    };
};

// নতুন_অভিব্যক্তি_বিবৃতি - অভিব্যক্তি বিবৃতি তৈরি করো
ধরি নতুন_অভিব্যক্তি_বিবৃতি = ফাংশন(টোকেন, অভিব্যক্তি) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": অভিব্যক্তি_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "অভিব্যক্তি": অভিব্যক্তি
    };
};

// নতুন_ব্লক_বিবৃতি - ব্লক বিবৃতি তৈরি করো ({ ... })
ধরি নতুন_ব্লক_বিবৃতি = ফাংশন(টোকেন) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": ব্লক_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "বিবৃতি": []
    };
};

// নতুন_যতক্ষণ_বিবৃতি - যতক্ষণ লুপ তৈরি করো
ধরি নতুন_যতক্ষণ_বিবৃতি = ফাংশন(টোকেন, শর্ত, দেহ) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": যতক্ষণ_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "শর্ত": শর্ত,
        "দেহ": দেহ
    };
};

// নতুন_পর্যন্ত_বিবৃতি - পর্যন্ত (for) লুপ তৈরি করো
ধরি নতুন_পর্যন্ত_বিবৃতি = ফাংশন(টোকেন, প্রাথমিক, শর্ত, বৃদ্ধি, দেহ) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": পর্যন্ত_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "প্রাথমিক": প্রাথমিক,
        "শর্ত": শর্ত,
        "বৃদ্ধি": বৃদ্ধি,
        "দেহ": দেহ
    };
};

// নতুন_বিরতি_বিবৃতি - বিরতি (break) তৈরি করো
ধরি নতুন_বিরতি_বিবৃতি = ফাংশন(টোকেন) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": বিরতি_বিবৃতি_টাইপ,
        "টোকেন": টোকেন
    };
};

// নতুন_চালিয়ে_যাও_বিবৃতি - চালিয়ে_যাও (continue) তৈরি করো
ধরি নতুন_চালিয়ে_যাও_বিবৃতি = ফাংশন(টোকেন) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": চালিয়ে_যাও_বিবৃতি_টাইপ,
        "টোকেন": টোকেন
    };
};

// নতুন_আমদানি_বিবৃতি - অন্তর্ভুক্ত (import) বিবৃতি তৈরি করো
ধরি নতুন_আমদানি_বিবৃতি = ফাংশন(টোকেন, পথ) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": আমদানি_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "পথ": পথ
    };
};

// নতুন_নির্ধারণ_বিবৃতি - নির্ধারণ বিবৃতি তৈরি করো (x = ৫)
ধরি নতুন_নির্ধারণ_বিবৃতি = ফাংশন(টোকেন, নাম, মান) {
    ফেরত {
        "নোড_টাইপ": বিবৃতি_নোড,
        "বিবৃতি_টাইপ": নির্ধারণ_বিবৃতি_টাইপ,
        "টোকেন": টোকেন,
        "নাম": নাম,
        "মান": মান
    };
};

// =============== অভিব্যক্তি নোড ===============

// নতুন_শনাক্তকারী - শনাক্তকারী তৈরি করো (x, y, ফাংশন_নাম)
ধরি নতুন_শনাক্তকারী = ফাংশন(টোকেন, মান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": শনাক্তকারী_টাইপ,
        "টোকেন": টোকেন,
        "মান": মান
    };
};

// নতুন_পূর্ণসংখ্যা_লিটারেল - পূর্ণসংখ্যা লিটারেল তৈরি করো (৫, ১০, ১০০)
ধরি নতুন_পূর্ণসংখ্যা_লিটারেল = ফাংশন(টোকেন, মান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": পূর্ণসংখ্যা_লিটারেল_টাইপ,
        "টোকেন": টোকেন,
        "মান": মান
    };
};

// নতুন_দশমিক_লিটারেল - দশমিক লিটারেল তৈরি করো (৩.১৪, ২.৫)
ধরি নতুন_দশমিক_লিটারেল = ফাংশন(টোকেন, মান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": দশমিক_লিটারেল_টাইপ,
        "টোকেন": টোকেন,
        "মান": মান
    };
};

// নতুন_স্ট্রিং_লিটারেল - স্ট্রিং লিটারেল তৈরি করো ("হ্যালো")
ধরি নতুন_স্ট্রিং_লিটারেল = ফাংশন(টোকেন, মান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": স্ট্রিং_লিটারেল_টাইপ,
        "টোকেন": টোকেন,
        "মান": মান
    };
};

// নতুন_বুলিয়ান - বুলিয়ান লিটারেল তৈরি করো (সত্য, মিথ্যা)
ধরি নতুন_বুলিয়ান = ফাংশন(টোকেন, মান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": বুলিয়ান_টাইপ,
        "টোকেন": টোকেন,
        "মান": মান
    };
};

// নতুন_উপসর্গ_অভিব্যক্তি - উপসর্গ অভিব্যক্তি তৈরি করো (!x, -৫)
ধরি নতুন_উপসর্গ_অভিব্যক্তি = ফাংশন(টোকেন, অপারেটর, ডান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": উপসর্গ_অভিব্যক্তি_টাইপ,
        "টোকেন": টোকেন,
        "অপারেটর": অপারেটর,
        "ডান": ডান
    };
};

// নতুন_মধ্যবর্তী_অভিব্যক্তি - মধ্যবর্তী অভিব্যক্তি তৈরি করো (৫ + ৩, x * y)
ধরি নতুন_মধ্যবর্তী_অভিব্যক্তি = ফাংশন(টোকেন, বাম, অপারেটর, ডান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": মধ্যবর্তী_অভিব্যক্তি_টাইপ,
        "টোকেন": টোকেন,
        "বাম": বাম,
        "অপারেটর": অপারেটর,
        "ডান": ডান
    };
};

// নতুন_যদি_অভিব্যক্তি - যদি অভিব্যক্তি তৈরি করো
ধরি নতুন_যদি_অভিব্যক্তি = ফাংশন(টোকেন, শর্ত, পরিণাম, বিকল্প) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": যদি_অভিব্যক্তি_টাইপ,
        "টোকেন": টোকেন,
        "শর্ত": শর্ত,
        "পরিণাম": পরিণাম,
        "বিকল্প": বিকল্প
    };
};

// নতুন_ফাংশন_লিটারেল - ফাংশন লিটারেল তৈরি করো
ধরি নতুন_ফাংশন_লিটারেল = ফাংশন(টোকেন, প্যারামিটার, দেহ) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": ফাংশন_লিটারেল_টাইপ,
        "টোকেন": টোকেন,
        "প্যারামিটার": প্যারামিটার,
        "দেহ": দেহ
    };
};

// নতুন_কল_অভিব্যক্তি - কল (call) অভিব্যক্তি তৈরি করো
ধরি নতুন_কল_অভিব্যক্তি = ফাংশন(টোকেন, ফাংশন, আর্গুমেন্ট) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": কল_অভিব্যক্তি_টাইপ,
        "টোকেন": টোকেন,
        "ফাংশন": ফাংশন,
        "আর্গুমেন্ট": আর্গুমেন্ট
    };
};

// নতুন_অ্যারে_লিটারেল - অ্যারে লিটারেল তৈরি করো ([১, ২, ৩])
ধরি নতুন_অ্যারে_লিটারেল = ফাংশন(টোকেন, উপাদান) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": অ্যারে_লিটারেল_টাইপ,
        "টোকেন": টোকেন,
        "উপাদান": উপাদান
    };
};

// নতুন_সূচক_অভিব্যক্তি - সূচক অভিব্যক্তি তৈরি করো (arr[০])
ধরি নতুন_সূচক_অভিব্যক্তি = ফাংশন(টোকেন, বাম, সূচক) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": সূচক_অভিব্যক্তি_টাইপ,
        "টোকেন": টোকেন,
        "বাম": বাম,
        "সূচক": সূচক
    };
};

// নতুন_হ্যাশ_লিটারেল - হ্যাশ লিটারেল তৈরি করো ({"নাম": "রহিম"})
ধরি নতুন_হ্যাশ_লিটারেল = ফাংশন(টোকেন, জোড়া) {
    ফেরত {
        "নোড_টাইপ": অভিব্যক্তি_নোড,
        "অভিব্যক্তি_টাইপ": হ্যাশ_লিটারেল_টাইপ,
        "টোকেন": টোকেন,
        "জোড়া": জোড়া
    };
};

// =============== ইউটিলিটি ফাংশন ===============

// নোড_থেকে_স্ট্রিং - নোডকে স্ট্রিং-এ রূপান্তর করো (ডিবাগিংয়ের জন্য)
ধরি নোড_থেকে_স্ট্রিং = ফাংশন(নোড) {
    যদি (নোড == নাল) {
        ফেরত "নাল";
    }
    
    ধরি টাইপ = নোড["নোড_টাইপ"];
    
    যদি (টাইপ == বিবৃতি_নোড) {
        ফেরত "বিবৃতি: " + নোড["বিবৃতি_টাইপ"];
    } নাহলে যদি (টাইপ == অভিব্যক্তি_নোড) {
        ফেরত "অভিব্যক্তি: " + নোড["অভিব্যক্তি_টাইপ"];
    }
    
    ফেরত "অজানা_নোড";
};

// টোকেন_লিটারেল - নোডের টোকেন লিটারেল পাও
ধরি টোকেন_লিটারেল = ফাংশন(নোড) {
    যদি (নোড == নাল) {
        ফেরত "";
    }
    
    যদি (চাবি_আছে(নোড, "টোকেন")) {
        ফেরত নোড["টোকেন"]["লিটারেল"];
    }
    
    ফেরত "";
};

লেখ("এএসটি মডিউল লোড হয়েছে");

